# üé¨ Cinema Hall

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∏–Ω–æ—Ç–µ–∞—Ç—Ä–æ–º —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –±–∏–ª–µ—Ç–æ–≤, —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ–∞–Ω—Å–∞–º–∏, —Ñ–∏–ª—å–º–∞–º–∏ –∏ –∑–∞–ª–∞–º–∏. –°–∏—Å—Ç–µ–º–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Apache Kafka –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π –∏ API Gateway –≤ –∫–∞—á–µ—Å—Ç–≤–µ –µ–¥–∏–Ω–æ–π —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞.

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Backend
- **–Ø–∑—ã–∫**: Go 1.25.4
- **–§—Ä–µ–π–º–≤–æ—Ä–∫**: Gin
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: PostgreSQL 15
- **ORM**: GORM
- **–û—á–µ—Ä–µ–¥—å —Å–æ–æ–±—â–µ–Ω–∏–π**: Apache Kafka
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: JWT (JSON Web Tokens)
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: slog (structured logging)

### Infrastructure
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è**: Docker, Docker Compose
- **API Gateway**: Custom Gateway –Ω–∞ Gin

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- 5 –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤: User, Movie, Cinema, Booking, Gateway
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π —á–µ—Ä–µ–∑ Kafka


## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

```bash
git clone <repository-url>
cd cinema-hall
docker-compose up -d
./seed_data.sh
```

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è**: Docker 20.10+, Docker Compose 2.0+

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞:
- Gateway: http://localhost:8085
- Kafka UI: http://localhost:8086

## üìö API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**Base URL**: `http://localhost:8085`

### –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

- `POST /api/auth/register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /api/auth/login` - –í—Ö–æ–¥ (–ø–æ–ª—É—á–µ–Ω–∏–µ JWT —Ç–æ–∫–µ–Ω–∞)
- `GET /api/movies` - –°–ø–∏—Å–æ–∫ —Ñ–∏–ª—å–º–æ–≤
- `GET /api/sessions` - –°–ø–∏—Å–æ–∫ —Å–µ–∞–Ω—Å–æ–≤
- `GET /api/sessions/:id/aggregate` - –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ–∞–Ω—Å–µ
- `POST /api/bookings` - –°–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- `POST /api/bookings/:id/confirm` - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- `POST /api/bookings/:id/cancel` - –û—Ç–º–µ–Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è


## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Gateway   ‚îÇ  (–ü–æ—Ä—Ç 8085)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚îú‚îÄ‚îÄ‚îÄ‚ñ∫ User Service (8080) ‚îÄ‚îÄ‚ñ∫ PostgreSQL
       ‚îú‚îÄ‚îÄ‚îÄ‚ñ∫ Movie Service (8083) ‚îÄ‚îÄ‚ñ∫ PostgreSQL
       ‚îú‚îÄ‚îÄ‚îÄ‚ñ∫ Cinema Service (8081) ‚îÄ‚îÄ‚ñ∫ PostgreSQL
       ‚îî‚îÄ‚îÄ‚îÄ‚ñ∫ Booking Service (8082) ‚îÄ‚îÄ‚ñ∫ PostgreSQL
                      ‚îÇ
                      ‚îî‚îÄ‚îÄ‚îÄ‚ñ∫ Kafka (9092) ‚îÄ‚îÄ‚ñ∫ Kafka UI (8086)
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
cinema-hall/
‚îú‚îÄ‚îÄ gateway/              # API Gateway
‚îú‚îÄ‚îÄ user-service/         # –°–µ—Ä–≤–∏—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îú‚îÄ‚îÄ movie-service/        # –°–µ—Ä–≤–∏—Å —Ñ–∏–ª—å–º–æ–≤
‚îú‚îÄ‚îÄ cinema-service/       # –°–µ—Ä–≤–∏—Å –∫–∏–Ω–æ–∑–∞–ª–æ–≤
‚îú‚îÄ‚îÄ booking-service/      # –°–µ—Ä–≤–∏—Å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
‚îú‚îÄ‚îÄ docker-compose.yml    # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
‚îî‚îÄ‚îÄ seed_data.sh         # –°–∫—Ä–∏–ø—Ç –¥–ª—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
```

## üë• –£—á–∞—Å—Ç–Ω–∏–∫–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

- –£—Å–º–∞–Ω –î–∑–∞–∫–∞–µ–≤         (https://github.com/dzakaev)
- –ë–µ–∫—Ö–∞–Ω –•–∞–¥–∂–∏–º–∞–≥–æ–º–∞–¥–æ–≤ (https://github.com/Bekkhanbs)
- –í–∏—Å –ú–∞–≥–æ–º–∞–¥–æ–≤         (https://github.com/magadov) 